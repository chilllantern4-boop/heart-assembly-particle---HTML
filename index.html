<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>3D Heart</title>
<style>
body{
  margin:0;
  background:#000;
  overflow:hidden;
  touch-action:none;
}

canvas{display:block}

.circle{
  position:fixed;
  left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:25vw;
  height:25vw;
  max-width:120px;
  max-height:120px;
  border-radius:50%;
  cursor:pointer;
  box-shadow:0 0 10px rgba(255,255,255,0.1) inset;
  -webkit-tap-highlight-color:transparent;
}

.text{
  position:fixed;
  left:50%;
  top:65%;
  transform:translateX(-50%);
  color:#FF4F4F;
  font-size:22px;
  font-family:Arial, sans-serif;
  opacity:0;
  transition:opacity 0.5s ease;
}
</style>
</head>
<body>

<canvas id="c"></canvas>
<div class="circle" id="btn"></div>
<p class="text" id="loveText">For my Raymond</p>

<script>
const c=document.getElementById("c");
const ctx=c.getContext("2d");
const loveText=document.getElementById("loveText");
let w,h;

function resize(){
  w=c.width=window.innerWidth;
  h=c.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

let particles=[];
let forming=false;
let rot=0;

for(let i=0;i<700;i++){
  particles.push({
    x:Math.random()*w,
    y:Math.random()*h,
    z:(Math.random()-0.5)*200,
    tx:0,ty:0,tz:0
  });
}

function heartPoint(t){
  return {
    x:16*Math.pow(Math.sin(t),3),
    y:13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)
  }
}

function setHeart(){
  let scale=Math.min(w,h)/40;
  particles.forEach(p=>{
    let t=Math.random()*Math.PI*2;
    let h2=heartPoint(t);
    let depth=(Math.random()-0.5)*40;
    p.tx=h2.x*scale;
    p.ty=-h2.y*scale;
    p.tz=depth;
  });
}

function project(x,y,z){
  let d=400;
  let s=d/(d-z);
  return {x:w/2+x*s,y:h/2+y*s}
}

function draw(){
  ctx.clearRect(0,0,w,h);
  rot+=0.02;
  particles.forEach(p=>{
    if(forming){
      p.x+=(p.tx-p.x)*0.08;
      p.y+=(p.ty-p.y)*0.08;
      p.z+=(p.tz-p.z)*0.08;
    }else{
      p.x+=(Math.random()-0.5)*2;
      p.y+=(Math.random()-0.5)*2;
    }

    let xr=p.x*Math.cos(rot)-p.z*Math.sin(rot);
    let zr=p.x*Math.sin(rot)+p.z*Math.cos(rot);
    let pos=project(xr,p.y,zr);

    ctx.fillStyle="rgba(255,0,0,0.8)";
    ctx.beginPath();
    ctx.arc(pos.x,pos.y,2,0,Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(draw);
}

draw();

const btn=document.getElementById("btn");
btn.addEventListener("mouseenter",()=>{
  forming=true;
  setHeart();
  loveText.style.opacity=1;
});
btn.addEventListener("mouseleave",()=>{
  forming=false;
  loveText.style.opacity=0;
});
btn.addEventListener("touchstart",()=>{
  forming=!forming;
  if(forming){
    setHeart();
    loveText.style.opacity=1;
  }else{
    loveText.style.opacity=0;
  }
});
</script>

</body>
</html>
